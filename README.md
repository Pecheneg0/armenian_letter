Отчёт команды «Покорители неба»
Разработка и реализация системы автономной навигации БПЛА с распознаванием букв армянского алфавита и посадкой по маркерам ArUco

  1. Цель проекта
  Целью проекта являлось создание интеллектуальной системы управления БПЛА, способной:
•	Распознавать символы армянского алфавита на поверхности при полёте на высоте 30–50 метров;
•	Локализовать ArUco-маркеры и производить точное центрирование над ними;
•	Автоматически инициировать посадку при обнаружении маркера;
•	Работать в режиме реального времени, контролируясь RC-пультом;
•	Функционировать автономно с возможностью логирования и удалённого мониторинга.

  2. Подготовка датасета
  2.1. Генерация на основе шрифтов
На начальном этапе для каждой буквы армянского алфавита (кодировки Unicode U+0531–U+0556) были сгенерированы изображения на основе шрифтов. Алгоритм генерации предусматривал:
•	Использование шрифтов с поддержкой армянского письма (Mshtakan и другие);
•	Белый фон, чёрная буква по центру;
•	Повороты от –30° до +30°;
•	Добавление размытия (имитация вибрации дрона);
•	Добавление нормального шума;
•	Приведение к размеру 32×32 пикселя.
Объём: 300 изображений на каждую букву. Скрипт генерации написан на Python с использованием PIL и OpenCV.
2.2. Расширение датасета
В дальнейшем к датасету были добавлены скриншоты реальных изображений букв, размещённых в именованных папках. Применялись:
•	Преобразования яркости, контрастности;
•	Добавление шумов типа salt & pepper;
•	Повороты на ±15°;
•	Имитация освещения и движения.
Суммарно датасет содержал примерно 25 000 изображений, по ~700 на каждую букву.

<img width="1539" alt="Снимок экрана 2025-04-23 в 21 26 16" src="https://github.com/user-attachments/assets/8946d56e-d5c9-446c-9284-171b310c9cfd" />


4. Архитектура модели
Была реализована и обучена сверточная нейронная сеть на PyTorch.
Конфигурация:
Слой	Назначение	Параметры
Conv2D → ReLU → MaxPool	Извлечение признаков	64 фильтра, ядро 3×3
Conv2D → ReLU → MaxPool	Углубление признаков	128 фильтров
FC (128 → 64 → 36)	Классификация	Полносвязные слои
Параметры обучения:
•	Оптимизатор: Adam, lr = 0.001, weight_decay = 1e-5
•	Функция потерь: CrossEntropyLoss
•	Аугментации: вращение, affine, jitter
•	Эпох: 30
•	Scheduler: StepLR (step=10, gamma=0.1)
Общая точность на валидации: 97–100% для большинства классов.
Минимальная точность: ~90% — у взаимозаменяемых букв (например, буквы, инверсные при повороте на 180°).


<img width="1539" alt="Снимок экрана 2025-04-23 в 21 26 16" src="https://github.com/user-attachments/assets/fa9c03f7-e50b-4491-af43-cbc2bb1ced2e" />

<img width="1539" alt="Снимок экрана 2025-04-23 в 21 25 58" src="https://github.com/user-attachments/assets/804d207a-f0a7-48f5-892c-17a967563f78" />


5. Встраивание модели на Raspberry Pi
Модель была экспортирована в .pth и интегрирована в управляющий скрипт, работающий на Raspberry Pi 4.
Характеристики:
•	Загружается в режиме eval, используется softmax для оценки уверенности;
•	Обрабатываются изображения с камеры (PiCamera2 / USB);
•	Используется трансформация: grayscale → resize → normalize.

6. Управляющий скрипт
5.1. Инициализация
Скрипт реализует класс DroneController, инициализирующий:
•	Подключение к Pixhawk по MAVLink (через UART /dev/ttyAMA0);
•	Камеру (по конфигурации USE_PICAM);
•	Модель и список меток классов;
•	Систему логирования и журналирования.
5.2. Режимы работы
Режимы выбираются по значению RC-канала (по умолчанию — канал 6):
Значение RC	Режим	Назначение
< 1100	OFF	Телеметрия, мониторинг
1300–1700	LETTERS	Распознавание букв
> 1900	ARUCO	Поиск маркера и посадка
Значения отфильтровываются: требуется минимум 3 совпадения подряд для подтверждения переключения режима (анти-дребезг).

6. Распознавание и действия
6.1. Распознавание букв
•	Изображения сегментируются по контуру (на основе порога);
•	Проверяются по размеру и форме (контуры квадратные, достаточно большие);
•	На каждый фрагмент применяется модель;
•	Если уверенность превышает CONFIDENCE_THRESHOLD, результат логируется.
6.2. Обнаружение ArUco
•	Используется словарь DICT_6X6_250, маркер с ID=10;
•	Проверка выполняется циклично с периодом 0.1 с;
•	При обнаружении выполняется центрирование и команда на посадку:
•	master.set_mode_apm("LAND")
•	Постепенное снижение тяги
•	disarm

<img width="1092" alt="Снимок экрана 2025-04-23 в 21 23 52" src="https://github.com/user-attachments/assets/edef5331-4e13-4481-aa82-cae33bfdcf7d" />

7. Телеметрия
В режиме OFF каждые 10 секунд контроллер отправляет в консоль по SSH:
•	Высоту, скорость;
•	GPS-координаты;
•	Углы ориентации;
•	Состояние батареи.
Также осуществляется логирование в файл sla_controller.log.

8. Безопасность и стабильность
•	При потере связи MAVLink выполняется автоматическое переподключение;
•	При переключении режима камера корректно освобождается и перезапускается;
•	Все скрипты логируют свою активность;
•	Реализован механизм ручного прерывания KeyboardInterrupt и остановки;

9. Результаты тестирования
•	Система корректно переключает режимы и выполняет посадку;
•	Уверенность модели распознавания — свыше 90%;
•	Удалённое управление через RC-пульт стабильно работает;
•	ArUco-маркеры распознаются с расстояния до 10 м (при хорошей освещённости).

<img width="1680" alt="Снимок экрана 2025-03-23 в 22 36 28" src="https://github.com/user-attachments/assets/47cd5fd4-cef8-4542-8d94-14efaca19d69" />

<img width="1680" alt="Снимок экрана 2025-04-23 в 21 23 00" src="https://github.com/user-attachments/assets/ccf4d566-7617-43f1-9e08-9b8da753b2dd" />

11. Заключение и планы по развитию
Система продемонстрировала высокую точность и стабильность.
Удалось реализовать:
•	Полноценное управление режимами полёта;
•	Распознавание букв армянского алфавита;
•	Интеграцию с телеметрией и возможностью посадки;
•	Логирование и автономную работу.
Возможные улучшения:
•	Добавление второй камеры (одна — для ArUco, вторая — для букв);
•	Расширение датасета за счёт реальных съёмок;
•	Оптимизация обработки изображения под Raspberry Pi;
•	Разработка интерфейса для ручного управления и отладки.



